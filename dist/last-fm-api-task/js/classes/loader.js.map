{"version":3,"sources":["../../../../last-fm-api-task/js/classes/loader.js"],"names":["Loader","prototype","API_KEY","SECRET_KEY","START_URL","FORMAT","METHOD_KEY","ARTIST_KEY","ALBUM_KEY","LINE_API_KEY","LINE_FORMAT","QUERY_POSTFIX","returnMethodQuery","method","returnArtistParameter","value","returnAlbumParameter","inherits","parent","child","Object","create","constructor","parseToObj","response","load","queryParams","Promise","resolve","reject","xhr","XMLHttpRequest","open","setRequestHeader","send","onreadystatechange","readyState","status"],"mappings":"AAAA;;AACA,SAASA,MAAT,GAAkB,CAAG;;AAErB;AACAA,OAAOC,SAAP,CAAiBC,OAAjB,GAA2B,kCAA3B;AACAF,OAAOC,SAAP,CAAiBE,UAAjB,GAA8B,kCAA9B;AACAH,OAAOC,SAAP,CAAiBG,SAAjB,GAA6B,oCAA7B;AACAJ,OAAOC,SAAP,CAAiBI,MAAjB,GAA0B,MAA1B;;AAEAL,OAAOC,SAAP,CAAiBK,UAAjB,GAA8B,SAA9B;AACAN,OAAOC,SAAP,CAAiBM,UAAjB,GAA8B,UAA9B;AACAP,OAAOC,SAAP,CAAiBO,SAAjB,GAA6B,SAA7B;;AAEAR,OAAOC,SAAP,CAAiBQ,YAAjB,GAAgC,cAAcT,OAAOC,SAAP,CAAiBC,OAA/D;AACAF,OAAOC,SAAP,CAAiBS,WAAjB,GAA+B,aAAaV,OAAOC,SAAP,CAAiBI,MAA7D;AACAL,OAAOC,SAAP,CAAiBU,aAAjB,GAAiCX,OAAOC,SAAP,CAAiBQ,YAAjB,GAAgCT,OAAOC,SAAP,CAAiBS,WAAlF;;AAEAV,OAAOC,SAAP,CAAiBW,iBAAjB,GAAqC,UAAUC,MAAV,EAAkB;AACrD,SAAOb,OAAOC,SAAP,CAAiBK,UAAjB,GAA8BO,MAArC;AACD,CAFD;;AAIAb,OAAOC,SAAP,CAAiBa,qBAAjB,GAAyC,UAAUC,KAAV,EAAiB;AACxD,SAAOf,OAAOC,SAAP,CAAiBM,UAAjB,GAA8BQ,KAArC;AACD,CAFD;;AAIAf,OAAOC,SAAP,CAAiBe,oBAAjB,GAAwC,UAAUD,KAAV,EAAiB;AACvD,SAAOf,OAAOC,SAAP,CAAiBO,SAAjB,GAA6BO,KAApC;AACD,CAFD;;AAIAf,OAAOC,SAAP,CAAiBgB,QAAjB,GAA4B,UAAUC,MAAV,EAAkBC,KAAlB,EAAyB;AACnDA,QAAMlB,SAAN,GAAkBmB,OAAOC,MAAP,CAAcH,OAAOjB,SAArB,CAAlB;AACAkB,QAAMlB,SAAN,CAAgBqB,WAAhB,GAA8BH,KAA9B;AACD,CAHD;;AAKAnB,OAAOC,SAAP,CAAiBsB,UAAjB,GAA8B,UAAUC,QAAV,EAAoB,CAAE,CAApD;;AAEAxB,OAAOC,SAAP,CAAiBwB,IAAjB,GAAwB,UAAUC,WAAV,EAAuB;AAC7C,SAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C,QAAMC,MAAO,IAAIC,cAAJ,EAAb;;AAEAD,QAAIE,IAAJ,CAAS,KAAT,EAAgBN,WAAhB,EAA6B,IAA7B;AACAI,QAAIG,gBAAJ,CAAqB,eAArB,EAAsC,UAAtC;;AAEAH,QAAII,IAAJ;;AAEAJ,QAAIK,kBAAJ,GAAyB,YAAW;AAClC,UAAI,KAAKC,UAAL,KAAoB,CAAxB,EAA2B;AAC3B,UAAI,KAAKC,MAAL,KAAgB,GAApB,EAAyB;AACvBR,eAAO,IAAP;AACA;AACD;AACDD,cAAQ,IAAR;AACD,KAPD;AAQD,GAhBM,CAAP;AAiBD,CAlBD","file":"loader.js","sourcesContent":["'use strict'\r\nfunction Loader() { }\r\n\r\n//Settings for Last.FM application\r\nLoader.prototype.API_KEY = '9a5f1f19efe1727160e4dbb5e4367b9d';\r\nLoader.prototype.SECRET_KEY = '92348e86733362627fd83e30dba8046e';\r\nLoader.prototype.START_URL = 'http://ws.audioscrobbler.com/2.0/?';\r\nLoader.prototype.FORMAT = 'json';\r\n\r\nLoader.prototype.METHOD_KEY = 'method=';\r\nLoader.prototype.ARTIST_KEY = '&artist=';\r\nLoader.prototype.ALBUM_KEY = '&album=';\r\n\r\nLoader.prototype.LINE_API_KEY = '&api_key=' + Loader.prototype.API_KEY;\r\nLoader.prototype.LINE_FORMAT = '&format=' + Loader.prototype.FORMAT;\r\nLoader.prototype.QUERY_POSTFIX = Loader.prototype.LINE_API_KEY + Loader.prototype.LINE_FORMAT;\r\n\r\nLoader.prototype.returnMethodQuery = function (method) {\r\n  return Loader.prototype.METHOD_KEY + method;\r\n};\r\n\r\nLoader.prototype.returnArtistParameter = function (value) {\r\n  return Loader.prototype.ARTIST_KEY + value;\r\n};\r\n\r\nLoader.prototype.returnAlbumParameter = function (value) {\r\n  return Loader.prototype.ALBUM_KEY + value;\r\n};\r\n\r\nLoader.prototype.inherits = function (parent, child) {\r\n  child.prototype = Object.create(parent.prototype);\r\n  child.prototype.constructor = child;\r\n};\r\n\r\nLoader.prototype.parseToObj = function (response) {};\r\n\r\nLoader.prototype.load = function (queryParams) {\r\n  return new Promise(function (resolve, reject) {\r\n    const xhr =  new XMLHttpRequest();\r\n\r\n    xhr.open('GET', queryParams, true);\r\n    xhr.setRequestHeader(\"Cache-Control\", 'no-cache');\r\n\r\n    xhr.send();\r\n\r\n    xhr.onreadystatechange = function() {\r\n      if (this.readyState !== 4) return;\r\n      if (this.status !== 200) {\r\n        reject(this);\r\n        return;\r\n      }\r\n      resolve(this);\r\n    };\r\n  });\r\n};"]}