{"version":3,"sources":["../../../../last-fm-api-task/js/classes/loader.js"],"names":["Loader","PROTO","prototype","API_KEY","SECRET_KEY","START_URL","FORMAT","METHOD_KEY","ARTIST_KEY","ALBUM_KEY","LINE_API_KEY","LINE_FORMAT","QUERY_POSTFIX","returnMethodQuery","method","returnArtistParameter","value","returnAlbumParameter","inherits","parent","child","Object","create","constructor","parseToObj","response","load","queryParams","Promise","resolve","reject","xhr","XMLHttpRequest","open","setRequestHeader","send","onreadystatechange","readyState","status"],"mappings":"AAAA;;;;;kBACwBA,M;AAAT,SAASA,MAAT,GAAkB,CAAG;;AAEpC,IAAMC,QAAQD,OAAOE,SAArB;AACA;AACAD,MAAME,OAAN,GAAgB,kCAAhB;AACAF,MAAMG,UAAN,GAAmB,kCAAnB;AACAH,MAAMI,SAAN,GAAkB,oCAAlB;AACAJ,MAAMK,MAAN,GAAe,MAAf;;AAEAL,MAAMM,UAAN,GAAmB,SAAnB;AACAN,MAAMO,UAAN,GAAmB,UAAnB;AACAP,MAAMQ,SAAN,GAAkB,SAAlB;;AAEAR,MAAMS,YAAN,GAAqB,cAAcT,MAAME,OAAzC;AACAF,MAAMU,WAAN,GAAoB,aAAaV,MAAMK,MAAvC;AACAL,MAAMW,aAAN,GAAsBX,MAAMS,YAAN,GAAqBT,MAAMU,WAAjD;;AAEAV,MAAMY,iBAAN,GAA0B,UAAUC,MAAV,EAAkB;AAC1C,SAAOd,OAAOE,SAAP,CAAiBK,UAAjB,GAA8BO,MAArC;AACD,CAFD;;AAIAb,MAAMc,qBAAN,GAA8B,UAAUC,KAAV,EAAiB;AAC7C,SAAOhB,OAAOE,SAAP,CAAiBM,UAAjB,GAA8BQ,KAArC;AACD,CAFD;;AAIAf,MAAMgB,oBAAN,GAA6B,UAAUD,KAAV,EAAiB;AAC5C,SAAOhB,OAAOE,SAAP,CAAiBO,SAAjB,GAA6BO,KAApC;AACD,CAFD;;AAIAf,MAAMiB,QAAN,GAAiB,UAAUC,MAAV,EAAkBC,KAAlB,EAAyB;AACxCA,QAAMlB,SAAN,GAAkBmB,OAAOC,MAAP,CAAcH,OAAOjB,SAArB,CAAlB;AACAkB,QAAMlB,SAAN,CAAgBqB,WAAhB,GAA8BH,KAA9B;AACD,CAHD;;AAKAnB,MAAMuB,UAAN,GAAmB,UAAUC,QAAV,EAAoB,CAAE,CAAzC;;AAEAxB,MAAMyB,IAAN,GAAa,UAAUC,WAAV,EAAuB;AAClC,SAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C,QAAMC,MAAO,IAAIC,cAAJ,EAAb;AACAD,QAAIE,IAAJ,CAAS,KAAT,EAAgBN,WAAhB,EAA6B,IAA7B;AACAI,QAAIG,gBAAJ,CAAqB,eAArB,EAAsC,UAAtC;;AAEAH,QAAII,IAAJ;;AAEAJ,QAAIK,kBAAJ,GAAyB,YAAW;AAClC,UAAI,KAAKC,UAAL,KAAoB,CAAxB,EAA2B;AAC3B,UAAI,KAAKC,MAAL,KAAgB,GAApB,EAAyB;AACvBR,eAAO,IAAP;AACA;AACD;AACDD,cAAQ,IAAR;AACD,KAPD;AAQD,GAfM,CAAP;AAgBD,CAjBD","file":"loader.js","sourcesContent":["'use strict';\r\nexport default function Loader() { }\r\n\r\nconst PROTO = Loader.prototype;\r\n//Settings for Last.FM application\r\nPROTO.API_KEY = '9a5f1f19efe1727160e4dbb5e4367b9d';\r\nPROTO.SECRET_KEY = '92348e86733362627fd83e30dba8046e';\r\nPROTO.START_URL = 'http://ws.audioscrobbler.com/2.0/?';\r\nPROTO.FORMAT = 'json';\r\n\r\nPROTO.METHOD_KEY = 'method=';\r\nPROTO.ARTIST_KEY = '&artist=';\r\nPROTO.ALBUM_KEY = '&album=';\r\n\r\nPROTO.LINE_API_KEY = '&api_key=' + PROTO.API_KEY;\r\nPROTO.LINE_FORMAT = '&format=' + PROTO.FORMAT;\r\nPROTO.QUERY_POSTFIX = PROTO.LINE_API_KEY + PROTO.LINE_FORMAT;\r\n\r\nPROTO.returnMethodQuery = function (method) {\r\n  return Loader.prototype.METHOD_KEY + method;\r\n};\r\n\r\nPROTO.returnArtistParameter = function (value) {\r\n  return Loader.prototype.ARTIST_KEY + value;\r\n};\r\n\r\nPROTO.returnAlbumParameter = function (value) {\r\n  return Loader.prototype.ALBUM_KEY + value;\r\n};\r\n\r\nPROTO.inherits = function (parent, child) {\r\n  child.prototype = Object.create(parent.prototype);\r\n  child.prototype.constructor = child;\r\n};\r\n\r\nPROTO.parseToObj = function (response) {};\r\n\r\nPROTO.load = function (queryParams) {\r\n  return new Promise(function (resolve, reject) {\r\n    const xhr =  new XMLHttpRequest();\r\n    xhr.open('GET', queryParams, true);\r\n    xhr.setRequestHeader(\"Cache-Control\", 'no-cache');\r\n\r\n    xhr.send();\r\n\r\n    xhr.onreadystatechange = function() {\r\n      if (this.readyState !== 4) return;\r\n      if (this.status !== 200) {\r\n        reject(this);\r\n        return;\r\n      }\r\n      resolve(this);\r\n    };\r\n  });\r\n};\r\n"]}