{"version":3,"sources":["../../../last-fm-api-task/js/loader.js"],"names":["Loader","user","password","prototype","load","queryParams","Promise","accept","reject","xhr","XMLHttpRequest","open","setRequestHeader","timeout","ontimeout","send","onreadystatechange","readyState","statusCode"],"mappings":"AAAA;;AACA,SAASA,MAAT,CAAgBC,IAAhB,EAAsBC,QAAtB,EAAgC;AAC9B,OAAKD,IAAL,GAAYA,IAAZ;AACA,OAAKC,QAAL,GAAgBA,QAAhB;AACD;;AAEDF,OAAOG,SAAP,CAAiBC,IAAjB,GAAwB,UAAUC,WAAV,EAAuB;AAC7C,SAAO,IAAIC,OAAJ,CAAY,UAAUC,MAAV,EAAkBC,MAAlB,EAA0B;AAC3C,QAAIC,MAAO,IAAIC,cAAJ,EAAX;;AAEAD,QAAIE,IAAJ,CAAS,KAAT,EAAgBN,WAAhB,EAA6B,IAA7B,EAAmC,KAAKJ,IAAxC,EAA8C,KAAKC,QAAnD;AACAO,QAAIG,gBAAJ,CAAqB,eAArB,EAAsC,UAAtC;AACAH,QAAII,OAAJ,GAAc,KAAd;;AAEAJ,QAAIK,SAAJ,GAAgB,YAAY;AAC1BN,aAAO,IAAP;AACD,KAFD;;AAIAC,QAAIM,IAAJ;;AAEAN,QAAIO,kBAAJ,GAAyB,YAAY;AACnC,UAAI,KAAKC,UAAL,KAAoB,CAAxB,EAA2B;AAC3B,UAAI,KAAKC,UAAL,KAAoB,GAAxB,EAA6B;AAC3BV,eAAO,IAAP;AACA;AACD;AACDD,aAAO,IAAP;AACD,KAPD;AAQD,GArBM,CAAP;AAsBD,CAvBD","file":"loader.js","sourcesContent":["'use strict'\r\nfunction Loader(user, password) {\r\n  this.user = user;\r\n  this.password = password;\r\n}\r\n\r\nLoader.prototype.load = function (queryParams) {\r\n  return new Promise(function (accept, reject) {\r\n    var xhr =  new XMLHttpRequest();\r\n\r\n    xhr.open('GET', queryParams, true, this.user, this.password);\r\n    xhr.setRequestHeader(\"Cache-Control\", 'no-cache');\r\n    xhr.timeout = 30000;\r\n\r\n    xhr.ontimeout = function () {\r\n      reject(this);\r\n    }\r\n\r\n    xhr.send();\r\n\r\n    xhr.onreadystatechange = function () {\r\n      if (this.readyState !== 4) return;\r\n      if (this.statusCode !== 200) {\r\n        reject(this);\r\n        return;\r\n      }\r\n      accept(this);\r\n    }\r\n  });\r\n}"]}